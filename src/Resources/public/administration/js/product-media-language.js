(this.webpackJsonp=this.webpackJsonp||[]).push([["product-media-language"],{"126j":function(e,a){e.exports='{% block sw_product_list_grid_columns_name_preview %}\n    <template #preview-name="{ item }">\n            <sw-media-preview-v2 v-if="item.media.first()\n            && item.media.first().extensions.productMediaLanguage\n            && item.media.first().extensions.productMediaLanguage.cover === true"\n                :source="item.media.first().media"\n            />\n\n            <sw-media-preview-v2 v-else\n                :source="null"\n            />\n    </template>\n{% endblock %}\n'},CWdl:function(e,a){var i=Shopware,t=i.Component,d=i.State,o=i.Utils,r=i.Context,n=Shopware.Data.Criteria;t.override("sw-product-variants-overview",{computed:{productMediaLanguageRepository:function(){return this.repositoryFactory.create("product_media_language")}},methods:{buildSearchQuery:function(e){var a=this.$super("buildSearchQuery",e);return a.addAssociation("media.productMediaLanguage"),a.getAssociation("media").addFilter(n.equals("productMediaLanguage.languageId",d.get("context").api.languageId)),a},onMediaInheritanceRemove:function(e,a){var i=this;a&&(e.forceMediaInheritanceRemove=!0,this.product.media.forEach((function(a){a.id;var t=a.mediaId,d=a.position,o=a.extensions,n=i.productMediaRepository.create(r.api);Object.assign(n,{mediaId:t,position:d,productId:i.product.id}),i.addProductMediaLanguageToProductMedia(n),n.extensions.productMediaLanguage.cover=!1,o.productMediaLanguage.cover&&(e.coverId=n.id,n.extensions.productMediaLanguage.cover=!0),e.media.push(n)})))},addProductMediaLanguageToProductMedia:function(e){if(!e.extensions.productMediaLanguage||!e.extensions.productMediaLanguage.id){var a=o.createId(),i=this.productMediaLanguageRepository.create(r,a);i.id=a,i.productMediaId=e.id,i.languageId=d.get("context").api.languageId,i.cover=this.product.media.length<=0,e.extensions.productMediaLanguage=i}}}})},L2qM:function(e,a){var i=Shopware,t=i.Component,d=i.Context,o=i.Utils,r=i.State,n=o.types.isEmpty;t.override("sw-product-detail-base",{computed:{productMediaLanguageRepository:function(){return this.repositoryFactory.create("product_media_language")}},methods:{addMedia:function(e){if(this.isExistingMedia(e))return Promise.reject(e);var a=this.productMediaRepository.create(d.api);return a.mediaId=e.id,a.media={url:e.url,id:e.id},this.addProductMediaLanguageToProductMedia(a),n(this.product.media)&&this.setMediaAsCover(a),this.product.media.add(a),Promise.resolve()},mediaRemoveInheritanceFunction:function(e){var a=this;return e.forEach((function(e){e.id;var i=e.mediaId,t=e.position,o=e.extensions,r=a.productMediaRepository.create(d.api);Object.assign(r,{mediaId:i,position:t,productId:a.product.id}),a.addProductMediaLanguageToProductMedia(r),r.extensions.productMediaLanguage.cover=!1,o.productMediaLanguage.cover&&(a.product.coverId=r.id,r.extensions.productMediaLanguage.cover=!0),a.product.media.push(r)})),this.$refs.productMediaInheritance.forceInheritanceRemove=!0,this.product.media},addProductMediaLanguageToProductMedia:function(e){if(!e.extensions.productMediaLanguage||!e.extensions.productMediaLanguage.id){var a=o.createId(),i=this.productMediaLanguageRepository.create(d,a);i.id=a,i.productMediaId=e.id,i.languageId=r.get("context").api.languageId,i.cover=this.product.media.length<=0,e.extensions.productMediaLanguage=i}}}})},Lfhm:function(e,a,i){"use strict";i.r(a);i("PEGc");var t=i("126j"),d=i.n(t),o=Shopware,r=o.Component,n=o.State,u=Shopware.Data.Criteria;r.override("sw-product-list",{template:d.a,computed:{productCriteria:function(){var e=this.$super("productCriteria");return e.addAssociation("media.productMediaLanguage"),e.getAssociation("media").addFilter(u.multi("and",[u.equals("productMediaLanguage.languageId",n.get("context").api.languageId),u.equals("productMediaLanguage.cover",!0)])),e},cover:function(){}}});var c=i("kdbl"),s=i.n(c),p=Shopware,g=p.Component,v=p.Context,m=p.State,l=p.Utils;g.override("sw-product-media-form",{template:s.a,computed:{cover:function(){var e=this;return this.product?this.product.media.find((function(a){return e.isCover(a)})):null},productMediaLanguageRepository:function(){return this.repositoryFactory.create("product_media_language")},currentCoverID:function(){var e=this;return this.productMedia.find((function(a){return e.isCover(a)})).id}},methods:{buildProductMedia:function(e){this.isLoading=!0;var a=this.$super("buildProductMedia",e);return this.addProductMediaLanguageToProductMedia(a),this.isLoading=!1,a},createMediaAssociation:function(e){var a=this.$super("createMediaAssociation",e);return this.addProductMediaLanguageToProductMedia(a),a},addProductMediaLanguageToProductMedia:function(e){if(!e.extensions.productMediaLanguage||!e.extensions.productMediaLanguage.id){var a=l.createId(),i=this.productMediaLanguageRepository.create(v,a);i.id=a,i.productMediaId=e.id,i.languageId=m.get("context").api.languageId,i.cover=this.product.media.length<=0,e.extensions.productMediaLanguage=i}},createPlaceholderMedia:function(e){var a=this.$super("createPlaceholderMedia",e);return a.extensions={productMediaLanguage:{cover:0===e.length}},a},removeCover:function(){var e=this;this.$super("removeCover"),this.product.media.forEach((function(a){a.extensions.productMediaLanguage&&e.setProductMediaLanguageCoverValue(a,!1)}))},isCover:function(e){return!!e.extensions.productMediaLanguage&&e.extensions.productMediaLanguage.cover},removeFile:function(e){this.$super("removeFile",e),e.extensions.productMediaLanguage&&e.extensions.productMediaLanguage.cover&&this.product.media.first()&&this.setProductMediaLanguageCoverValue(this.product.media.first(),!0)},markMediaAsCover:function(e){var a=this;this.$super("markMediaAsCover",e),this.product.media.forEach((function(e){a.setProductMediaLanguageCoverValue(e,!1)})),this.setProductMediaLanguageCoverValue(e,!0)},onDropMedia:function(e){if(this.$super("onDropMedia",e),1===this.product.media.length){var a=this.product.media.first();this.setProductMediaLanguageCoverValue(a,!0)}},setProductMediaLanguageCoverValue:function(e,a){e.extensions.productMediaLanguage&&(e.extensions.productMediaLanguage.cover=a)}}});var h=i("ggAW"),M=i.n(h),f=Shopware,L=f.Component,_=f.Context,w=f.State,x=f.Utils;L.override("sw-product-variants-media-upload",{template:M.a,computed:{cover:function(){var e=this;return this.product?this.product.media.find((function(a){return e.isCover(a)})):null},productMediaLanguageRepository:function(){return this.repositoryFactory.create("product_media_language")}},methods:{isCover:function(e){return!!e.extensions.productMediaLanguage&&e.extensions.productMediaLanguage.cover},markMediaAsCover:function(e){var a=this;this.$super("markMediaAsCover",e),this.product.media.forEach((function(e){a.setProductMediaLanguageCoverValue(e,!1)})),this.setProductMediaLanguageCoverValue(e,!0)},removeMedia:function(e){(this.$super("removeMedia",e),e.extensions.productMediaLanguage.cover)&&(this.product.media.first().extensions.productMediaLanguage.cover=!0)},addMedia:function(e){if(this.isExistingMedia(e))return Promise.reject(e);var a=this.productMediaRepository.create(_.api);return a.mediaId=e.id,a.media={url:e.url,id:e.id},this.addProductMediaLanguageToProductMedia(a),isEmpty(this.product.media)&&this.setMediaAsCover(a),this.product.media.add(a),Promise.resolve()},onUploadMediaSuccessful:function(e){var a=e.targetId;if(!this.isReplacedMedia(a)){var i=this.productMediaRepository.create(_.api);i.productId=this.source.id,i.mediaId=a,this.addProductMediaLanguageToProductMedia(i),isEmpty(this.source.media)?(i.position=0,this.source.coverId=i.id):i.position=this.source.media.length,this.source.media.add(i)}},addProductMediaLanguageToProductMedia:function(e){if(!e.extensions.productMediaLanguage||!e.extensions.productMediaLanguage.id){var a=x.createId(),i=this.productMediaLanguageRepository.create(_,a);i.id=a,i.productMediaId=e.id,i.languageId=w.get("context").api.languageId,i.cover=this.product.media.length<=0,e.extensions.productMediaLanguage=i}},setProductMediaLanguageCoverValue:function(e,a){e.extensions.productMediaLanguage&&(e.extensions.productMediaLanguage.cover=a)}}});i("CWdl"),i("L2qM")},PEGc:function(e,a){var i=Shopware,t=i.Component,d=i.State,o=Shopware.Data.Criteria;t.override("sw-product-detail",{computed:{productCriteria:function(){var e=this.$super("productCriteria");return e.addAssociation("media.productMediaLanguage"),e.getAssociation("media").addFilter(o.equals("productMediaLanguage.languageId",d.get("context").api.languageId)),e}}})},ggAW:function(e,a){e.exports='{% block sw_product_variants_media_upload_cover_preview %}\n    <div\n        v-if="cover"\n        class="sw-product-variants-media-upload__preview-cover"\n    >\n        {% block sw_product_variants_media_upload_cover_image %}\n            <sw-media-preview-v2\n                class="sw-product-variants-media-upload__cover-image"\n                :source="cover.mediaId"\n            />\n        {% endblock %}\n    </div>\n    <div\n        v-else-if="source.media.length > 0"\n        class="sw-product-variants-media-upload__preview-cover"\n    >\n        {% block sw_product_variants_media_upload_cover_image_empty %}\n            <sw-media-preview-v2\n                class="sw-product-variants-media-upload__cover-image"\n                :source="null"\n            />\n        {% endblock %}\n    </div>\n{% endblock %}\n\n\n{% block sw_product_media_form_cover_preview %}\n    <div\n        v-if="cover"\n        class="sw-product-media-form__preview-cover"\n    >\n        <div class="preview-cover">\n            {% block sw_product_media_form_cover_image %}\n                <sw-media-preview-v2\n                    class="sw-product-media-form__cover-image"\n                    :source="cover.mediaId"\n                />\n            {% endblock %}\n            <span>{{ $tc(\'sw-product.mediaForm.coverSubline\') }}</span>\n        </div>\n    </div>\n    <div\n        v-else\n        class="sw-product-media-form__cover-image is--placeholder"\n    >\n        {{ $tc(\'sw-product.mediaForm.coverSubline\') }}\n    </div>\n{% endblock %}\n'},kdbl:function(e,a){e.exports='{% block sw_product_media_form_cover_preview %}\n    <div\n        v-if="cover"\n        class="sw-product-media-form__preview-cover"\n    >\n        <div class="preview-cover">\n            {% block sw_product_media_form_cover_image %}\n                <sw-media-preview-v2\n                    class="sw-product-media-form__cover-image"\n                    :source="cover.mediaId"\n                />\n            {% endblock %}\n            <span>{{ $tc(\'sw-product.mediaForm.coverSubline\') }}</span>\n        </div>\n    </div>\n    <div\n        v-else\n        class="sw-product-media-form__cover-image is--placeholder"\n    >\n        {{ $tc(\'sw-product.mediaForm.coverSubline\') }}\n    </div>\n{% endblock %}\n'}},[["Lfhm","runtime"]]]);