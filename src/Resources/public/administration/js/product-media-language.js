(this.webpackJsonp=this.webpackJsonp||[]).push([["product-media-language"],{"126j":function(e,t){e.exports='{% block sw_product_list_grid_columns_name_preview %}\n    <template #preview-name="{ item }">\n            <sw-media-preview-v2 v-if="item.media.first()\n            && item.media.first().extensions.productMediaLanguage\n            && item.media.first().extensions.productMediaLanguage.cover === true"\n                :source="item.media.first().media"\n            />\n\n            <sw-media-preview-v2 v-else\n                :source="null"\n            />\n    </template>\n{% endblock %}\n'},L2qM:function(e,t){var i=Shopware,a=i.Component,r=i.Context,o=i.Utils,d=i.State,n=o.types.isEmpty;a.override("sw-product-detail-base",{computed:{productMediaLanguageRepository:function(){return this.repositoryFactory.create("product_media_language")}},methods:{addMedia:function(e){if(this.isExistingMedia(e))return Promise.reject(e);var t=this.productMediaRepository.create(r.api);t.mediaId=e.id,t.media={url:e.url,id:e.id};var i=o.createId(),a=this.productMediaLanguageRepository.create(r.api,i);return a.id=i,a.productMediaId=t.id,a.languageId=d.get("context").api.languageId,a.cover=!1,n(this.product.media)&&(a.cover=!0,this.setMediaAsCover(t)),t.extensions.productMediaLanguage=a,this.product.media.add(t),Promise.resolve()}}})},Lfhm:function(e,t,i){"use strict";i.r(t);i("PEGc");var a=i("126j"),r=i.n(a),o=Shopware,d=o.Component,n=o.State,u=Shopware.Data.Criteria;d.override("sw-product-list",{template:r.a,computed:{productCriteria:function(){var e=this.$super("productCriteria");return e.addAssociation("media.productMediaLanguage"),e.getAssociation("media").addFilter(u.multi("and",[u.equals("productMediaLanguage.languageId",n.get("context").api.languageId),u.equals("productMediaLanguage.cover",!0)])),e},cover:function(){}}});var s=i("kdbl"),c=i.n(s),p=Shopware,g=p.Component,v=p.Context,m=p.State,l=p.Utils;g.override("sw-product-media-form",{template:c.a,computed:{cover:function(){var e=this;return this.product?this.product.media.find((function(t){return e.isCover(t)})):null},productMediaLanguageRepository:function(){return this.repositoryFactory.create("product_media_language")},currentCoverID:function(){var e=this;return this.productMedia.find((function(t){return e.isCover(t)})).id}},methods:{buildProductMedia:function(e){this.isLoading=!0;var t=this.$super("buildProductMedia",e);return this.addProductMediaLanguageToProductMedia(t),this.isLoading=!1,t},createMediaAssociation:function(e){var t=this.$super("createMediaAssociation",e);return this.addProductMediaLanguageToProductMedia(t),t},addProductMediaLanguageToProductMedia:function(e){if(!e.extensions.productMediaLanguage||!e.extensions.productMediaLanguage.id){var t=l.createId(),i=this.productMediaLanguageRepository.create(v,t);i.id=t,i.productMediaId=e.id,i.languageId=m.get("context").api.languageId,i.cover=this.product.media.length<=0,e.extensions.productMediaLanguage=i}},createPlaceholderMedia:function(e){var t=this.$super("createPlaceholderMedia",e);return t.extensions={productMediaLanguage:{cover:0===e.length}},t},removeCover:function(){var e=this;this.$super("removeCover"),this.product.media.forEach((function(t){t.extensions.productMediaLanguage&&e.setProductMediaLanguageCoverValue(t,!1)}))},isCover:function(e){return!!e.extensions.productMediaLanguage&&e.extensions.productMediaLanguage.cover},removeFile:function(e){this.$super("removeFile",e),e.extensions.productMediaLanguage&&e.extensions.productMediaLanguage.cover&&this.product.media.first()&&this.setProductMediaLanguageCoverValue(this.product.media.first(),!0)},markMediaAsCover:function(e){var t=this;this.$super("markMediaAsCover",e),this.product.media.forEach((function(e){t.setProductMediaLanguageCoverValue(e,!1)})),this.setProductMediaLanguageCoverValue(e,!0)},onDropMedia:function(e){if(this.$super("onDropMedia",e),1===this.product.media.length){var t=this.product.media.first();this.setProductMediaLanguageCoverValue(t,!0)}},setProductMediaLanguageCoverValue:function(e,t){e.extensions.productMediaLanguage&&(e.extensions.productMediaLanguage.cover=t)}}});i("L2qM")},PEGc:function(e,t){var i=Shopware,a=i.Component,r=i.State,o=Shopware.Data.Criteria;a.override("sw-product-detail",{computed:{productCriteria:function(){var e=this.$super("productCriteria");return e.addAssociation("media.productMediaLanguage"),e.getAssociation("media").addFilter(o.equals("productMediaLanguage.languageId",r.get("context").api.languageId)),e}}})},kdbl:function(e,t){e.exports='{% block sw_product_media_form_cover_preview %}\n    <div\n        v-if="cover"\n        class="sw-product-media-form__preview-cover"\n    >\n        <div class="preview-cover">\n            {% block sw_product_media_form_cover_image %}\n                <sw-media-preview-v2\n                    class="sw-product-media-form__cover-image"\n                    :source="cover.mediaId"\n                />\n            {% endblock %}\n            <span>{{ $tc(\'sw-product.mediaForm.coverSubline\') }}</span>\n        </div>\n    </div>\n    <div\n        v-else\n        class="sw-product-media-form__cover-image is--placeholder"\n    >\n        {{ $tc(\'sw-product.mediaForm.coverSubline\') }}\n    </div>\n{% endblock %}\n'}},[["Lfhm","runtime"]]]);